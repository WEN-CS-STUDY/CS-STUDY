인터럽트의 정의 : 하드웨어 장치나 소프트웨어가 cpu의 현재 흐름을 중단시키고 즉시 처리해야 하는 이벤트를 알리는 메커니즘.

인터럽트는 크게 두가지로 분류

- 하드웨어 인터럽트
    - 외부 장치(키보드, 디스크 컨트롤러, 타이머 등) 가 물리적 신호를 통해 보낸다.
- 소프트웨어 인터럽트 (트랩, 시스템 콜)
    - 프로그램이 의도적으로 cpu에게 인터럽트를 발생시킨다.
    - ex) 0으로 나누는 상황, 파일 i/o

인터럽트의 동작 방식

- 키보드나 마우스의 클릭 등 인터럽트가 필요한 신호가 들어온다.
- 인터럽트 컨트롤러가 cpu에 알린다.
- cpu는 인터럽트를 감지하면 현재 작업을 중단한다.
- 이때 현재 작업을 PCB(Process Control Block) 에 저장한다.
- 인터럽트의 종류마다 처리해야할 인터럽트 처리루틴이 다르기때문에 인터럽트 벡터에 종류마다 처리해야할 실제 코드의 위치를 저장되어있다.
- 이 벡터에서 실제 처리해야할 코드의 위치를 찾아 실행을 한다.
- 처리가 끝나면 PCB 를 통해서 다시 하던일을 하러간다.

그럼 시스템 콜은 무엇일까?

시스템 콜은 하드웨어가 아닌 사용자가 소프트웨어를 통해서 커널의 서비스를 이용하기 위해 요청하는 것 이다.

운영체제는 user mode 와 kernal mode 가 있다. 이는 보안을 위해서 이렇게 나뉘어져 있고,  만약 유저가 kernal mode 의 것들을 이용할 수 있다면 보안적으로 문제가 되기 때문에 이렇게 나누어 user mode 만 우리가 사용할 수 있고 만약 kernal mode 의 기능을 사용해야 한다면 이때 시스템 콜이 발생한다.

시스템 콜의 동작 순서는 간단하게 하면

- 파일의 I/O와 같은 시스템 콜이 필요한 동작을 수행하면
- syscall 명령어(시스템 콜을 부르는 명령어) 를 통해 cpu 가 실행 중인 명령을 멈추고 커널모드로 전환.
- 그러면 시스템 콜을 부른 명령어에 따라 다르겠지만 지금은 파일의 I/O를 디스크가 수행한다.
- I/O 완료 후에 완료됐다는 것을 하드웨어 인터럽트를 통해 cpu에 전달
- 위에 동작순서처럼 인터럽트를 수행하고 시스템 콜을 부른 프로세스가 다시 깨워진다(이때 바로 동작하는 것은 아니고 스케쥴링에 따라 순서가 정해진다)
- 커널이 결과를 사용자에게 전달하고 커널 모드를 유저 모드로 전환한다.

즉 시스템 콜은 인터럽트의 작은 부분으로 커널 모드의 기능을 수행하기 위하여 cpu에 요청을 보내는 것

하지만 인터럽트는 예측 불가능한 비동기적 이고

시스템 콜은 프로그램이 직접 호출하는 동기적 이다.